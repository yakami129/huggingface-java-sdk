/*
 * This file was generated by the Gradle 'init' task.
 */
apply plugin: 'idea'
apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'signing'

description = "huggingface-VITS-SDK"
group 'io.github.yakami129'
version = '1.0.3-SNAPSHOT'
sourceCompatibility = '11'

repositories {
    maven { url "https://s01.oss.sonatype.org/content/repositories/releases"}
    maven { url "https://s01.oss.sonatype.org/content/repositories/snapshots"}
    maven { url 'https://maven.aliyun.com/repository/public' }
    maven { url 'https://maven.aliyun.com/repository/google' }
    maven { url 'https://maven.aliyun.com/repository/spring' }
    maven { url 'https://maven.aliyun.com/repository/spring-plugin' }
    mavenLocal()
    mavenCentral()
}

ext {
    commonsLang3Version = '3.12.0'
    commonsCollections4Version = '4.4'
    guavaVersion = '31.1-jre'
    hutoolVersion = '5.8.5'
    lombokVersion = '1.18.24'
    okhttpVersion = '1.0.1-RELEASES:plain'
    slf4jVersion = '1.7.36'
}

dependencies {

    compile "com.google.guava:guava:${guavaVersion}"
    compile "cn.hutool:hutool-all:${hutoolVersion}"
    compile "org.projectlombok:lombok:${lombokVersion}"
    compile "org.slf4j:slf4j-api:${slf4jVersion}"
    annotationProcessor "org.projectlombok:lombok:${lombokVersion}"

    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.0'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'

}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

task sourcesJar(type: Jar) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

test {
    useJUnitPlatform()
}

artifacts {
    archives sourcesJar
}

signing {
    sign configurations.archives
}


uploadArchives {
    repositories {
        mavenDeployer {

            beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }

            repository(url: "https://s01.oss.sonatype.org/content/repositories/releases/") {
                authentication(userName: ossrhUsername, password: ossrhPassword)
            }
            snapshotRepository(url: "https://s01.oss.sonatype.org/content/repositories/snapshots/") {
                authentication(userName: ossrhUsername, password: ossrhPassword)
            }

            pom.project {
                name 'concise-infrastructure-starter'
                packaging 'jar'
                // optionally artifactId can be defined here
                description 'This is a Java infrastructure component library to help users quickly build frameworks'
                url 'https://github.com/yakami129/concise-infrastructure-starter'

                scm {
                    connection 'https://github.com/yakami129/concise-infrastructure-starter.git'
                    url 'https://github.com/yakami129/concise-infrastructure-starter.git'
                }

                licenses {
                    license {
                        name 'The Apache License, Version 2.0'
                        url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
                    }
                }

                developers {
                    developer {
                        id 'okapi0129'
                        name 'okapi0129'
                        email 'okapi0129@outlook.com'
                    }
                }
            }
        }
    }
}
